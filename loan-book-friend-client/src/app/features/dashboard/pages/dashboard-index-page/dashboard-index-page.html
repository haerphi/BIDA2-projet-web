<section class="row row-cols-1 row-cols-md-4 g-3 mb-4">
    <div class="col">
        <app-stat-element
            title="ðŸ“š Total livres"
            [badgeColor]="TextBgStyleEnum.Primary"
            [stat]="booksCount || 0"
            [loading]="booksLoading"
        />
    </div>

    <div class="col">
        <app-stat-element
            title="ðŸ‘¥ Amis"
            [badgeColor]="TextBgStyleEnum.Success"
            [stat]="friendsCount || 0"
            [loading]="friendsLoading"
        />
    </div>

    <div class="col">
        <app-stat-element
            title="ðŸ“¤ Vos prÃªts"
            [badgeColor]="TextBgStyleEnum.Primary"
            [stat]="loansCount || 0"
            [loading]="loansLoading"
        />
    </div>

    <div class="col">
        <app-stat-element
            title="ðŸ“¥ Vos emprunts"
            [badgeColor]="TextBgStyleEnum.Danger"
            [stat]="boorrowedCount || 0"
            [loading]="loansLoading"
        />
    </div>
</section>

<!-- 3 colonnes -->
<section class="row g-4">
    <!-- LIVRES -->
    <div class="col-lg-4">
        <div class="card shadow-sm">
            <div class="card-body">
                <div class="section-title">ðŸ“š Mes livres</div>
                <p class="section-subtitle">GÃ©rer votre bibliothÃ¨que</p>
                <app-spoil buttonText="âž• Nouveau livre" buttonTextHide="âž– Nouveau livre">
                    <app-book-create (bookCreated)="onBookCreated()" />
                </app-spoil>
                <hr />

                <app-book-list
                    [books]="books"
                    [loading]="booksLoading"
                    (filterBooks)="onFilterBooks($event)"
                />
            </div>
        </div>
    </div>

    <!-- AMIS -->
    <div class="col-lg-4">
        <div class="card shadow-sm">
            <div class="card-body">
                <div class="section-title">ðŸ‘¥ Mes amis</div>
                <p class="section-subtitle">Contacts</p>
                <app-spoil buttonText="âž• Nouvel ami" buttonTextHide="âž– Nouvel ami">
                    <app-friend-send-request
                        (sendFriendRequest)="onSendFriendRequest($event)"
                /></app-spoil>
                <hr />

                @if (friendRequestsLoading) {
                    <app-spinner />
                } @else {
                    <app-spoil
                        [buttonText]="
                            `âž• Voir les demandes d'amis` +
                            (receivedFriendRequestsCount
                                ? ` (${receivedFriendRequestsCount})`
                                : '')
                        "

                        [buttonTextHide]="`âž– Voir les demandes d'amis` +
                            (receivedFriendRequestsCount
                            ? ` (${receivedFriendRequestsCount})`
                            : '')
                            "
                    >
                        <app-friend-requests
                            [requestsSent]="sentFriendRequests"
                            [requestsReceived]="receivedFriendRequests"
                            (acceptRequest)="onAcceptFriendRequest($event)"
                            (declineRequest)="onDeclineFriendRequest($event)"
                        />
                    </app-spoil>
                }
                <hr />

                <app-friend-list
                    [friends]="friends"
                    [loading]="friendsLoading"
                    (filterFriends)="onFilterFriends($event)"
                />
            </div>
        </div>
    </div>

    <!-- PRÃŠTS -->
    <div class="col-lg-4">
        <div class="card shadow-sm">
            <div class="card-body">
                <div class="section-title">ðŸ“¤ PrÃªts & ðŸ“¥ emprunts</div>
                <p class="section-subtitle">Suivi des emprunts</p>

                <app-spoil buttonText="âž• Nouveau prÃªt" buttonTextHide="âž– Nouveau prÃªt">
                    <app-loan-create (createLoan)="onCreateLoan($event)" />
                </app-spoil>
                <hr />
                <app-loan-list
                    [loans]="loanedBooks"
                    [borrowed]="borrowedBooks"
                    [loading]="loansLoading"
                    (filterLoans)="onFilterLoans($event)"
                />
            </div>
        </div>
    </div>
</section>
